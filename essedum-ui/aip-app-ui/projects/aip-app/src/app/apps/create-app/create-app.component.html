<div class="lfx-l-level2-middle-col p-4">
  <header class="flex justify-content-between align-items-center px-4">
    <h2>App Details</h2>
    <mat-icon class="aip-cursor close-icon" aria-label="Close" matTooltip="Close" matTooltipPosition="above"
      [ngStyle]="{'color': isCloseHovered ? '#0094ff' : '#0a142f'}" (mouseenter)="isCloseHovered = true"
      (mouseleave)="isCloseHovered = false" (click)="closeModal()">
      close
    </mat-icon>
  </header>

  <main class="p-4">
    <form class="row">
      <!-- Display Name Field -->
      <div class="col-12">
        <mat-form-field appearance="fill" class="w-100">
          <mat-label>Display Name</mat-label>
          <input matInput placeholder="Enter Name..." [(ngModel)]="alias" name="displayName" required *ngIf="!edit">
          <input matInput placeholder="Enter Name..." [(ngModel)]="editCanvas.alias" name="displayNameEdit" required
            *ngIf="edit">
          <mat-error *ngIf="edit && !editCanvas.alias">This field is required</mat-error>
          <mat-error *ngIf="!edit && !alias">This field is required</mat-error>
        </mat-form-field>
      </div>

      <!-- Description Field -->
      <div class="col-12">
        <mat-form-field appearance="fill" class="w-100">
          <mat-label>Description</mat-label>
          <input matInput placeholder="Enter App Description..." [(ngModel)]="description" name="description"
            *ngIf="!edit">
          <input matInput placeholder="Enter App Description..." [(ngModel)]="editCanvas.description"
            name="descriptionEdit" *ngIf="edit">
        </mat-form-field>
      </div>

      <!-- Tryout Link Field (Edit Mode Only) -->
      <div *ngIf="edit" class="col-12">
        <mat-form-field appearance="fill" class="w-100">
          <mat-label>Tryout Link</mat-label>
          <input matInput placeholder="Paste your link..." [(ngModel)]="editCanvas.tryoutlink" name="tryoutLink">
        </mat-form-field>
      </div>

      <!-- App Type Select -->
      <div class="col-12 lfx-u-mar-b-16">
        <mat-form-field appearance="fill" class="w-100">
          <mat-label>Type</mat-label>
          <mat-select [(ngModel)]="apptype" name="appType" required (selectionChange)="setAppType($event)"
            *ngIf="!edit">
            <mat-option *ngFor="let type of appTypeList" [value]="type.value">
              {{ type.viewValue }}
            </mat-option>
          </mat-select>
          <mat-select [(ngModel)]="editCanvas.scope" name="appTypeEdit" required (selectionChange)="setAppType($event)"
            *ngIf="edit">
            <mat-option *ngFor="let type of appTypeList" [value]="type.value">
              {{ type.viewValue }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="edit && !editCanvas.scope">This field is required</mat-error>
          <mat-error *ngIf="!edit && !apptype">This field is required</mat-error>
        </mat-form-field>
      </div>

      <!-- URL Input (when URL type is selected) -->
      <div *ngIf="isUrl" class="col-12 lfx-u-mar-b-16">
        <mat-form-field appearance="fill" class="w-100">
          <mat-label>URL</mat-label>
          <input matInput [(ngModel)]="link" name="url" required *ngIf="!edit">
          <input matInput [(ngModel)]="editCanvas.url" name="urlEdit" required *ngIf="edit">
          <mat-error *ngIf="edit && !editCanvas.url">This field is required</mat-error>
          <mat-error *ngIf="!edit && !link">This field is required</mat-error>
        </mat-form-field>
      </div>

      <!-- Logo Upload Section -->
      <div class="col-12">
        <div class="upload-docs">
          <mat-card class="logo-upload-card">
            <div *ngIf="exceededSize" class="error-message">
              <em class="error-text">Maximum upload file size: 250KB</em>
            </div>

            <div class="upload-header">
              <label class="upload-label">Logo</label>
              <label class="upload-icon-wrapper" for="logoUpload">
                <input id="logoUpload" type="file" class="file-input" accept=".png,.jpg,.jpeg"
                  (change)="onImageChange($event)">
                <mat-icon>upload</mat-icon>
              </label>
            </div>

            <img *ngIf="edit && finalImage" [src]="finalImage" alt="App Logo" class="uploaded-image">
            <img *ngIf="!edit" #myImage alt="App Logo" class="uploaded-image"
              [style.display]="uploader.queue.length > 0 ? 'block' : 'none'">
          </mat-card>
        </div>
      </div>
    </form>
  </main>

  <!-- Action Buttons -->
  <footer class="action-buttons-container">
    <div class="action-buttons">
      <button mat-stroked-button class="cancel-button" type="button" (click)="closeModal()">
        Cancel
      </button>
      <button mat-flat-button [class]="edit ? 'update-button' : 'save-button'" [disabled]="disableSave" type="button"
        (click)="disableSave ? null : (edit ? editDetails() : saveDetails())">
        {{ edit ? 'Update' : 'Save' }}
      </button>
    </div>
  </footer>
</div>