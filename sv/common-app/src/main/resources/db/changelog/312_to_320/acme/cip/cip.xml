<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.1.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">

		<changeSet author="Leap" id="24-cip-20250211-01">
    <sql dbms="mysql, postgresql" splitStatements="true" stripComments="true"> 
		INSERT INTO mldatasource (
    id, connectiondetails, description, dshashcode, name, organization, salt, type, category,
    activetime, lastmodifiedby, lastmodifieddate, alias, extras, interfacetype,
    fordataset, foradapter, forruntime, formodel, forpromptprovider
) VALUES (
    6329,
    '{
        "secretKey": "",
        "accessKey": "",
        "Region": "us-east-1",
        "url": "http://100.78.49.20:9000"
    }',
    NULL,
    NULL,
    'LEOMN-S310629',
    'leo1311',
    NULL,
    'S3',
    'S3',
    '2025-05-26 10:41:38.671681',
    'demouser',
    '2025-05-26 10:41:39',
    'Sample-S3',
    '{"apispec":{},"apispectemplate":{}}',
    NULL,
    0, 0, 1, 0, 0
);

		INSERT INTO mldatasource (
    id, connectiondetails, description, dshashcode, name, organization, salt, type, category,
    activetime, lastmodifiedby, lastmodifieddate, alias, extras, interfacetype,
    fordataset, foradapter, forruntime, formodel, forpromptprovider
) VALUES (
    6331,
    '{
        "NoProxy": "true",
        "formats": {
            "datasource-dp": "Datasource",
            "bucketname-dp": "Bucket Name",
            "storageType-dp": "Storage Type",
            "datasource": "datasourceDropdown",
            "bucketname": "input",
            "projectId-dp": "Project Id",
            "storageType": "input",
            "projectId": "input",
            "userId": "input",
            "userId-dp": "User Id"
        },
        "ConnectionType": "ApiRequest",
        "AuthDetails": {
            "authParams": {
                "grant_type": "",
                "client_secret": "",
                "client_id": ""
            }
        },
        "userId": "test",
        "Url": "http://100.78.49.20:5000/execute",
        "url": "",
        "tokenExpirationTime": "",
        "password": "",
        "datasource": "LEOMN-S310629",
        "bucketname": "aiptest",
        "testDataset": {
            "name": "",
            "attributes": {
                "bodyType": "Text",
                "Endpoint": "",
                "RequestMethod": "GET",
                "Headers": "",
                "LeapParams": [],
                "QueryParams": [],
                "Body": ""
            }
        },
        "storageType": "minio",
        "AuthType": "NoAuth",
        "projectId": "test",
        "fileId": ""
    }',
    NULL,
    NULL,
    'LEOMN-RM22869',
    'leo1311',
    NULL,
    'REMOTE',
    'REST',
    '2025-05-26 10:51:07.198841',
    'demouser',
    '2025-05-26 10:51:07',
    'Sample-Remote',
    '{"apispec":{},"apispectemplate":{}}',
    NULL,
    0, 0, 1, 0, 0
);

        INSERT INTO mldatasource (
    id, connectiondetails, description, dshashcode, name, organization, salt, type, category,
    activetime, lastmodifiedby, lastmodifieddate, alias, extras, interfacetype,
    fordataset, foradapter, forruntime, formodel, forpromptprovider
) VALUES (
    6332,
    '{
        "NoProxy": "true",
        "password": "",
        "ConnectionType": "ApiRequest",
        "testDataset": {
            "name": "",
            "attributes": {
                "bodyType": "Text",
                "Endpoint": "",
                "RequestMethod": "GET",
                "Headers": "",
                "LeapParams": [],
                "QueryParams": "",
                "Body": ""
            }
        },
        "AuthDetails": {
            "password": "abcdef",
            "authParams": {
                "grant_type": "",
                "client_secret": "",
                "client_id": ""
            },
            "authToken": "abcdef"
        },
        "AuthType": "NoAuth",
        "Url": "http://100.78.49.20:8000/test",
        "url": "",
        "fileId": "",
        "tokenExpirationTime": ""
    }',
    NULL,
    '9c360ba8e41e645e3afbdd6d26ad0f071abfa9c4cc6508e835a9e0743d627e92',
    'LEOSMPL-36919',
    'leo1311',
    NULL,
    'REST',
    'REST',
    '2025-05-26 11:10:16.944815',
    'demouser',
    '2025-05-26 11:10:17',
    'Sample-Infer-Rest',
    '{"apispec":{},"apispectemplate":{}}',
    NULL,
    0, 1, 0, 0, 0
);

INSERT INTO mladapters (
    name, organization, connectionid, connectionname, spectemplatedomainname,
    description, category, createdby, createdon, lastmodifiedby, lastmodifiedon,
    apispec, isactive, executiontype, isChain, chainName
) VALUES (
    "linear_regression", "leo1311", "LEOSMPL-36919", "Sample-Infer-Rest", "Linear_Regression",
    "", "DYNAMIC", "demouser", "2025-07-22 05:22:01", "demouser", "2025-07-22 06:43:34",
    "{\"openapi\":\"3.0.2\",\"info\":{\"version\":1,\"title\":\"linear_regression\",\"description\":\"\"},\"servers\":[{\"url\":\"http://localhost:8087\"}],\"paths\":{\"/api/aip/adapters/Linear_regression/infer/leo1311\":{\"post\":{\"dataset\":\"LEOINFRG28279\",\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\",\"description\":\"accept\",\"required\":\"true\",\"type\":\"string\",\"in\":\"header\"},{\"name\":\"Content-Type\",\"value\":\"application/json\",\"description\":\"Content-Type\",\"required\":\"true\",\"type\":\"string\",\"in\":\"header\"}],\"requestBody\":{\"description\":\"request\",\"required\":true,\"content\":{\"application/json\":{\"schema\":{\"$ref\":\"#/components/schemas/input\",\"properties\":{\"example\":\"{\\\"years_of_experiance\\\":[5,2.5]}\"}}}},\"value\":\"{\\\"years_of_experiance\\\":[5,2.5]}\"},\"responses\":{\"200\":{\"description\":\"response\",\"content\":{\"application/json\":{\"schema\":{\"type\":\"string\"}}}},\"default\":{\"description\":\"error\",\"content\":{\"application/json\":{\"schema\":{\"type\":\"string\"}}}}}}},\"/api/aip/adapters/Linear_regression/test/{org}\":{\"get\":{\"dataset\":\"LEOTSTML11731\",\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\",\"description\":\"accept\",\"required\":\"true\",\"type\":\"string\",\"in\":\"header\"},{\"name\":\"Content-Type\",\"value\":\"application/json\",\"description\":\"Content-Type\",\"required\":\"true\",\"type\":\"string\",\"in\":\"header\"}],\"responses\":{\"200\":{\"description\":\"response\",\"content\":{\"application/json\":{\"schema\":{\"type\":\"string\"}}}},\"default\":{\"description\":\"error\",\"content\":{\"application/json\":{\"schema\":{\"type\":\"string\"}}}}}}}},\"components\":{\"schemas\":{\"input\":{\"properties\":{}}},\"securitySchemes\":{\"bearerAuth\":{\"type\":\"http\",\"scheme\":\"bearer\",\"bearerFormat\":\"JWT\"},\"basicAuth\":{\"type\":\"http\",\"scheme\":\"basic\"}},\"security\":[{\"bearerAuth\":[],\"basicAuth\":[]}]}}", "Y", "REST", NULL, NULL
);

INSERT INTO mladapters (
    name,
    organization,
    connectionid,
    connectionname,
    spectemplatedomainname,
    description,
    category,
    createdby,
    createdon,
    lastmodifiedby,
    lastmodifiedon,
    apispec,
    isactive,
    executiontype,
    isChain,
    chainName
)
VALUES (
    'classification',
    'leo1311',
    'LEOSMPL-36919',
    'Sample-Infer-Rest',
    'classification',
    '',
    'DYNAMIC',
    'demouser',
    '2025-07-22 07:10:10',
    'demouser',
    '2025-07-22 07:20:57',
    '{
        \"openapi\": \"3.0.2\",
        \"info\": {
            \"version\": 1,
            \"title\": \"classification\",
            \"description\": \"\"
        },
        \"servers\": [
            {
                \"url\": \"http://localhost:8087\"
            }
        ],
        \"paths\": {
            \"/api/aip/adapters/Classification/infer/leo1311\": {
                \"post\": {
                    \"dataset\": \"LEOINFRR75259\",
                    \"parameters\": [
                        {
                            \"name\": \"accept\",
                            \"description\": \"accept\",
                            \"required\": true,
                            \"in\": \"header\",
                            \"schema\": {
                                \"type\": \"string\",
                                \"default\": \"application/json\"
                            }
                        },
                        {
                            \"name\": \"Content-Type\",
                            \"description\": \"Content-Type\",
                            \"required\": true,
                            \"in\": \"header\",
                            \"schema\": {
                                \"type\": \"string\",
                                \"default\": \"application/json\"
                            }
                        }
                    ],
                    \"requestBody\": {
                        \"description\": \"request\",
                        \"required\": true,
                        \"content\": {
                            \"application/json\": {
                                \"schema\": {
                                    \"$ref\": \"#/components/schemas/input\"
                                },
                                \"example\": {
                                    \"Subject_Length\": 35,
                                    \"Num_Links\": 1,
                                    \"Num_Attachments\": 0,
                                    \"Sender_Reputation\": \"Low\",
                                    \"Contains_Spam_Words\": \"No\"
                                }
                            }
                        }
                    },
                    \"responses\": {
                        \"200\": {
                            \"description\": \"response\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        },
                        \"default\": {
                            \"description\": \"error\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            \"/api/aip/adapters/Classification/infer/{org}\": {
                \"post\": {
                    \"dataset\": \"LEOINFRR75259\",
                    \"parameters\": [
                        {
                            \"name\": \"accept\",
                            \"description\": \"accept\",
                            \"required\": true,
                            \"in\": \"header\",
                            \"schema\": {
                                \"type\": \"string\",
                                \"default\": \"application/json\"
                            }
                        },
                        {
                            \"name\": \"Content-Type\",
                            \"description\": \"Content-Type\",
                            \"required\": true,
                            \"in\": \"header\",
                            \"schema\": {
                                \"type\": \"string\",
                                \"default\": \"application/json\"
                            }
                        }
                    ],
                    \"requestBody\": {
                        \"description\": \"request\",
                        \"required\": true,
                        \"content\": {
                            \"application/json\": {
                                \"schema\": {
                                    \"$ref\": \"#/components/schemas/input\"
                                },
                                \"example\": {
                                    \"Subject_Length\": 35,
                                    \"Num_Links\": 1,
                                    \"Num_Attachments\": 0,
                                    \"Sender_Reputation\": \"Low\",
                                    \"Contains_Spam_Words\": \"No\"
                                }
                            }
                        }
                    },
                    \"responses\": {
                        \"200\": {
                            \"description\": \"response\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        },
                        \"default\": {
                            \"description\": \"error\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        \"components\": {
            \"schemas\": {
                \"input\": {
                    \"type\": \"object\",
                    \"properties\": {
                        \"Subject_Length\": { \"type\": \"integer\" },
                        \"Num_Links\": { \"type\": \"integer\" },
                        \"Num_Attachments\": { \"type\": \"integer\" },
                        \"Sender_Reputation\": { \"type\": \"string\" },
                        \"Contains_Spam_Words\": { \"type\": \"string\" }
                    }
                }
            },
            \"securitySchemes\": {
                \"bearerAuth\": {
                    \"type\": \"http\",
                    \"scheme\": \"bearer\",
                    \"bearerFormat\": \"JWT\"
                },
                \"basicAuth\": {
                    \"type\": \"http\",
                    \"scheme\": \"basic\"
                }
            }
        },
        \"security\": [
            {
                \"bearerAuth\": [],
                \"basicAuth\": []
            }
        ]
    }',
    'Y',
    'REST',
    NULL,
    NULL
);

insert into mlintstance (name,adaptername,organization,connectionid,connectionname,spectemplatedomainname,description,category,createdby,createdon,lastmodifiedby,lastmodifiedon,executiontype) values("linear_regression","linear_regression","leo1311","LEOSMPL-36919","Sample-Infer-Rest","Linear_Regression","","DYNAMIC","demouser","2025-07-22 05:22:32",NULL,"2025-07-22 05:22:32","REST");
insert into mlintstance (name,adaptername,organization,connectionid,connectionname,spectemplatedomainname,description,category,createdby,createdon,lastmodifiedby,lastmodifiedon,executiontype) values("classification","classification","leo1311","LEOSMPL-36919","Sample-Infer-Rest","classification","","DYNAMIC","demouser","2025-07-22 07:10:34","NULL","2025-07-22 07:10:34","REST");
INSERT INTO mlspectemplates (
    domainname,
    organization,
    capability,
    description,
    apispectemplate,
    createdby,
    createdon,
    lastmodifiedby,
    lastmodifiedon
)
VALUES (
    'Linear_Regression',
    'leo1311',
    'custom',
    NULL,
    '{
        \"openapi\": \"3.0.1\",
        \"info\": {
            \"title\": \"Infosys AI Platform - Custom API Spec - Linear Regression\",
            \"description\": \"API documentation for Infosys AI Platform - Linear Regression\",
            \"version\": \"v1\"
        },
        \"servers\": [
            {
                \"url\": \"https://essedum.az.ad.idemo-ppc.com/\"
            }
        ],
        \"security\": [
            {
                \"Basic\": []
            }
        ],
        \"paths\": {
            \"/api/aip/adapters/Linear_regression/infer/leo1311\": {
                \"post\": {
                    \"description\": \"Get the results for Custom POST API Configuration\",
                    \"parameters\": [
                        {
                            \"name\": \"accept\",
                            \"value\": \"application/json\",
                            \"description\": \"accept\",
                            \"required\": true,
                            \"type\": \"string\",
                            \"in\": \"header\"
                        },
                        {
                            \"name\": \"Content-Type\",
                            \"value\": \"application/json\",
                            \"description\": \"Content-Type\",
                            \"required\": true,
                            \"type\": \"string\",
                            \"in\": \"header\"
                        }
                    ],
                    \"requestBody\": {
                        \"description\": \"request\",
                        \"required\": true,
                        \"content\": {
                            \"application/json\": {
                                \"schema\": {
                                    \"$ref\": \"#/components/schemas/input\"
                                },
                                \"example\": {
                                    \"inputText\": \"You are a dummy\"
                                }
                            }
                        }
                    },
                    \"responses\": {
                        \"200\": {
                            \"description\": \"response\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        },
                        \"default\": {
                            \"description\": \"error\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            \"/api/aip/adapters/Linear_regression/test/leo1311\": {
                \"get\": {
                    \"description\": \"Get the results for Custom POST API Configuration\",
                    \"parameters\": [
                        {
                            \"name\": \"accept\",
                            \"value\": \"application/json\",
                            \"description\": \"accept\",
                            \"required\": true,
                            \"type\": \"string\",
                            \"in\": \"header\"
                        },
                        {
                            \"name\": \"Content-Type\",
                            \"value\": \"application/json\",
                            \"description\": \"Content-Type\",
                            \"required\": true,
                            \"type\": \"string\",
                            \"in\": \"header\"
                        }
                    ],
                    \"responses\": {
                        \"200\": {
                            \"description\": \"response\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        },
                        \"default\": {
                            \"description\": \"error\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        \"components\": {
            \"schemas\": {
                \"input\": {
                    \"properties\": {
                        \"inputText\": {
                            \"type\": \"string\"
                        }
                    }
                }
            },
            \"securitySchemes\": {
                \"bearerAuth\": {
                    \"type\": \"http\",
                    \"scheme\": \"bearer\",
                    \"bearerFormat\": \"JWT\"
                },
                \"basicAuth\": {
                    \"type\": \"http\",
                    \"scheme\": \"basic\"
                }
            }
        }
    }',
    'leo1311',
    NOW(),
    'leo1311',
    NOW()
);


INSERT INTO mlspectemplates (
    domainname,
    organization,
    capability,
    description,
    apispectemplate,
    createdby,
    createdon,
    lastmodifiedby,
    lastmodifiedon
)
VALUES (
    'classification',
    'leo1311',
    'custom',
    NULL,
    '{
        \"openapi\": \"3.0.1\",
        \"info\": {
            \"title\": \"Infosys AI Platform - Custom API Spec - Classification\",
            \"description\": \"API documentation for Infosys AI Platform - Classification\",
            \"version\": \"v1\"
        },
        \"servers\": [
            {
                \"url\": \"https://essedum.az.ad.idemo-ppc.com/\"
            }
        ],
        \"security\": [
            {
                \"Basic\": []
            }
        ],
        \"paths\": {
            \"/api/aip/adapters/Classification/infer/leo1311\": {
                \"post\": {
                    \"description\": \"Get the results for Custom POST API Configuration\",
                    \"parameters\": [
                        {
                            \"name\": \"accept\",
                            \"value\": \"application/json\",
                            \"description\": \"accept\",
                            \"required\": true,
                            \"type\": \"string\",
                            \"in\": \"header\"
                        },
                        {
                            \"name\": \"Content-Type\",
                            \"value\": \"application/json\",
                            \"description\": \"Content-Type\",
                            \"required\": true,
                            \"type\": \"string\",
                            \"in\": \"header\"
                        }
                    ],
                    \"requestBody\": {
                        \"description\": \"request\",
                        \"required\": true,
                        \"content\": {
                            \"application/json\": {
                                \"schema\": {
                                    \"$ref\": \"#/components/schemas/input\"
                                },
                                \"example\": {
                                    \"inputText\": \"You are a dummy\"
                                }
                            }
                        }
                    },
                    \"responses\": {
                        \"200\": {
                            \"description\": \"response\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        },
                        \"default\": {
                            \"description\": \"error\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            \"/api/aip/adapters/Classification/test/leo1311\": {
                \"get\": {
                    \"description\": \"Get the results for Custom POST API Configuration\",
                    \"parameters\": [
                        {
                            \"name\": \"accept\",
                            \"value\": \"application/json\",
                            \"description\": \"accept\",
                            \"required\": true,
                            \"type\": \"string\",
                            \"in\": \"header\"
                        },
                        {
                            \"name\": \"Content-Type\",
                            \"value\": \"application/json\",
                            \"description\": \"Content-Type\",
                            \"required\": true,
                            \"type\": \"string\",
                            \"in\": \"header\"
                        }
                    ],
                    \"responses\": {
                        \"200\": {
                            \"description\": \"response\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        },
                        \"default\": {
                            \"description\": \"error\",
                            \"content\": {
                                \"application/json\": {
                                    \"schema\": {
                                        \"type\": \"string\"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        \"components\": {
            \"schemas\": {
                \"input\": {
                    \"properties\": {
                        \"inputText\": {
                            \"type\": \"string\"
                        }
                    }
                }
            },
            \"securitySchemes\": {
                \"bearerAuth\": {
                    \"type\": \"http\",
                    \"scheme\": \"bearer\",
                    \"bearerFormat\": \"JWT\"
                },
                \"basicAuth\": {
                    \"type\": \"http\",
                    \"scheme\": \"basic\"
                }
            }
        }
    }',
    'leo1311',
    NOW(),
    'leo1311',
    NOW()
);




	</sql> 
	
</changeSet>
		<changeSet author="Leap" id="24-cip-20250211-02">
    <sql dbms="mssql" splitStatements="true" stripComments="true"> 
    	SET IDENTITY_INSERT mldatasource ON;
	ALTER TABLE mldatasource ALTER COLUMN activetime DATETIME2(6);
		insert into mldatasource (id, connectiondetails, description, dshashcode, name, organization, salt, type, category, activetime, lastmodifiedby, lastmodifieddate, alias, extras, interfacetype, fordataset, foradapter, forruntime, formodel, forpromptprovider) values('6147','{\"password\":\"encLkcb27L/zuAk1JyL/ZRkK+OtD+xHAnPc\",\"userName\":\"leapadm\",\"url\":\"jdbc:mysql://10.67.9.46:3307/telemetrydb\"}','','43cc308507c43465d602b076401eb02932457a977861b740e25d52d67955ddbf','LEOTLMTR19390','leo1311','MXqgjgoT80rHK7Iws+9JVbQDtx1z30l0YwsukVbKWah17uos5iceLGfHIOqKpoxngkuFjtAJRKWZZG/SCbmd6w==','MYSQL','SQL','2025-01-17 08:06:40.391611','admin','2025-01-17 08:06:40','TelemetryDB','{\"apispec\":{},\"apispectemplate\":{}}',NULL,NULL,NULL,NULL,NULL,NULL);
		insert into mldatasource (id, connectiondetails, description, dshashcode, name, organization, salt, type, category, activetime, lastmodifiedby, lastmodifieddate, alias, extras, interfacetype, fordataset, foradapter, forruntime, formodel, forpromptprovider) values('6327','{\"password\":\"encLkcb27L/zuAk1JyL/ZRkK+OtD+xHAnPc\",\"userName\":\"leapadm\",\"url\":\"jdbc:mysql://10.67.9.46:3307/telemetrydb\"}','','43cc308507c43465d602b076401eb02932457a977861b740e25d52d67955ddbf','LEOTLMTR19390','Pragya_1177353','MXqgjgoT80rHK7Iws+9JVbQDtx1z30l0YwsukVbKWah17uos5iceLGfHIOqKpoxngkuFjtAJRKWZZG/SCbmd6w==','MYSQL','SQL','2025-01-17 08:06:40.391611','admin','2025-01-17 08:06:40','TelemetryDB','{\"apispec\":{},\"apispectemplate\":{}}',NULL,NULL,NULL,NULL,NULL,NULL);
		SET IDENTITY_INSERT mldatasource OFF;
	</sql> 
</changeSet>

	  <changeSet dbms="mysql,postgresql,mssql" author="Leap (generated)" id="3v2-cip-01">
        <loadData commentLineStartsWith="#" encoding="UTF-8" file="db/changelog/312_to_320/acme/cip/mlpipeline.csv" quotchar="&quot;" separator="," tableName="mlpipeline">
            <column header="created_by" name="created_by" type="STRING"/>
            <column header="created_date" name="created_date" type="datetime(6)"/>
            <column header="deleted" name="deleted" type="BOOLEAN"/>
            <column header="description" name="description" type="STRING"/>
            <column header="job_id" name="job_id" type="skip"/>
            <column header="json_content" name="json_content" type="STRING"/>
            <column header="lastmodifiedby" name="lastmodifiedby" type="STRING"/>
            <column header="alias" name="alias" type="STRING"/>
            <column header="lastmodifieddate" name="lastmodifieddate" type="datetime"/>
            <column header="name" name="name" type="STRING"/>
            <column header="organization" name="organization" type="STRING"/>
            <column header="type" name="type" type="STRING"/>
            <column header="version" name="version" type="skip"/>
            <column header="tags" name="tags" type="STRING"/>
	    	    <column header="interfacetype" name="interfacetype" type="STRING"/>
	         	<column header="pipeline_metadata" name="pipeline_metadata" type="STRING"/>
			      <column header="is_template" name="is_template" type="boolean"/>
			      <column header="is_app" name="is_app" type="NUMERIC"/>
        </loadData>
    </changeSet>
	   
    <changeSet dbms="mysql,postgresql, mssql" author="Leap (generated)" id="3v2-cip-02">
        <loadData commentLineStartsWith="#" encoding="UTF-8" file="db/changelog/312_to_320/acme/cip/mldataset.csv" quotchar="&quot;" separator="," tableName="mldataset">
            <column header="id" name="id" type="NUMERIC"/>
            <column header="attributes" name="attributes" type="STRING"/>
            <column header="dataset_type" name="dataset_type" type="STRING" />
            <column header="description" name="description" type="STRING"/>
            <column header="exp_status" name="exp_status" type="NUMERIC"/>
            <column header="name" name="name" type="STRING"/>
            <column header="organization" name="organization" type="STRING"/>
            <column header="schemajson" name="schemajson" type="STRING"/>
            <column header="type" name="type" type="STRING"/>
            <column header="backing_dataset" name="backing_dataset" type="STRING"/>
            <column header="dataset_schema" name="dataset_schema" type="STRING"/>
            <column header="datasource" name="datasource" type="STRING"/>
            <column header="lastmodifiedby" name="lastmodifiedby" type="STRING"/>
            <column header="lastmodifieddate" name="lastmodifieddate" type="DATE"/>
            <column header="alias" name="alias" type="STRING"/>
            <column header="context" name="context" type="STRING" />
            <column name="is_approval_required" defaultValueBoolean="false" type="boolean" />
			<column name="is_permission_managed" defaultValueBoolean="false" type="boolean" />
            <column name="is_inbox_required" defaultValueBoolean="false" type="boolean" />
	    	<column name="is_audit_required" defaultValueBoolean="false" type="boolean" />
	    	<column name="is_archival_enabled" defaultValueBoolean="false" type="boolean" />
	    	<column header="archival_config" name="archival_config" type="STRING" />
		    <column header="dashboard" name="dashboard" type="NUMERIC" />
		    <column header="metadata" name="metadata" type="STRING" />
		    <column header="modeltype" name="modeltype" type="STRING" />
		    <column header="views" name="views" type="STRING" />
		    <column header="taskdetails" name="taskdetails" type="STRING" />
		    <column header="tags" name="tags" type="STRING" />
		    <column header="interfacetype" name="interfacetype" type="STRING"/>
			<column header="adaptername" name="adaptername" type="STRING"/>
			<column header="isadapteractive" name="isadapteractive" type="STRING"/>
			<column header="indexname" name="indexname" type="STRING"/>
			<column header="summary" name="summary" type="STRING"/>
			<column header="event_details" name="event_details" type="STRING"/>
			
        </loadData>
    </changeSet>
	<changeSet author="Leap (generated)" id="3v2-cip-03">
		<loadData commentLineStartsWith="#" encoding="UTF-8" file="db/changelog/312_to_320/acme/cip/mleventjobmapping.csv" quotchar="&quot;" separator="," tableName="mleventjobmapping">
			<column header="id" name="id" type="NUMERIC" />
			<column header="body" name="body" type="STRING" />
			<column header="description" name="description" type="STRING" />
			<column header="eventname" name="eventname" type="STRING" />
			<column header="jobdetails" name="jobdetails" type="STRING" />
			<column header="organization" name="organization" type="STRING" />
			<column header="interfacetype" name="interfacetype" type="STRING" />
		</loadData>
	</changeSet>

	<changeSet author="Leap" id="3v1-cip-20250108-100">
		<sql dbms="mssql" splitStatements="true" stripComments="true">
		UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT ci_id  AS Host_ID,ci_name ,display_name AS Host_Name,ci_STATUS AS Status,os_type AS OS_Type,cpu_cores AS CPU_Cores,ip_address AS IP_Address FROM sre_ci_metadata WHERE project_id = {project_id} AND ci_type=''Host'';","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"project_id\":\"project_id\",\"hostgroup\":\"host_groupName\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'TotalHost_DT' AND organization = 'leo1311';
		</sql> 
	</changeSet>





	<changeSet author="Leap" id="3v1-cip-20250108-200">
		<sql dbms="mssql" splitStatements="true" stripComments="true">
		UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT ci_id AS Host_Id, h.display_name AS Host_Name, displayId AS Issue_ID, eventId AS Problem_ID, title AS Description, p.status AS Status, severityLevel AS Severity_Level, DATEADD(SECOND, startTime / 1000, ''19700101 00:00:00:000'') AS Raised_Time FROM  sre_event p JOIN sre_ci_metadata h ON h.ci_name = p.rootCauseEntity WHERE h.project_id = {project_id} AND p.project_id = {project_id} AND eventType = ''Issue'' AND startTime BETWEEN CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', DATEADD(DAY, -1, GETDATE())) AS BIGINT) * 1000 AND CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', GETDATE()) AS BIGINT) * 1000 AND p.status = ''OPEN'';","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"project_id\":\"p.project_id\",\"hostgroup\":\"host_groupName\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'HostswithIssues_DT' and organization = 'leo1311';
		</sql> 
	</changeSet>
 
 
 


	<changeSet author="Leap" id="3v1-cip-20250108-300">
		<sql dbms="mssql" splitStatements="true" stripComments="true">
		UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT ci_Id AS Host_ID, display_Name AS Host_Name, e.eventId AS Event_ID, title AS Description, e.status AS Status, severityLevel AS Severity_Level, FORMAT(DATEADD(SECOND, CAST(startTime AS BIGINT) / 1000, ''19700101 00:00:00:000''), ''MM/dd/yy HH:mm:ss'') AS Raised_Time FROM sre_event e JOIN sre_ci_metadata h ON h.ci_name = e.rootCauseEntity WHERE h.project_id = {project_id} AND e.eventType = ''Alert''     AND h.ci_type = ''Host'' AND e.project_id = {project_id}  AND startTime BETWEEN CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', DATEADD(DAY, -1, GETDATE())) AS BIGINT) AND CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', GETDATE()) AS BIGINT) AND e.status = ''OPEN'';","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"project_id\":\"e.project_id\",\"hostgroup\":\"host_groupName\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'HostswithAlerts_DT' and organization = 'leo1311';
		</sql> 
	</changeSet>





	<changeSet author="Leap" id="3v1-cip-20250108-400">
		<sql dbms="mssql" splitStatements="true" stripComments="true">
		UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT a.ci_Id  AS Application_ID,a.ci_name, a.display_Name AS Application_Name,ci_STATUS AS Status,application_Type AS Application_Type FROM sre_ci_metadata a WHERE a.project_id = {project_id} AND  a.ci_type=''Application'' and a.apm_type = ''DT'' ","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"project_id\":\"project_id\",\"hostgroup\":\"host_groupName\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'TotalApps_DT' and organization = 'leo1311';
		</sql> 
	</changeSet>




	<changeSet author="Leap" id="3v1-cip-20250108-500">
		<sql dbms="mssql" splitStatements="true" stripComments="true">
		UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT m.ci_Id AS Entity_ID, m.display_name AS App_Name, eventId AS Problem_Id, displayId AS Issue_ID, title AS Description, p.status AS Status, severityLevel AS Severity_Level, FORMAT(DATEADD(SECOND, CAST(startTime AS BIGINT) / 1000, ''19700101 00:00:00:000''), ''MM/dd/yy HH:mm:ss'') AS Raised_Time FROM sre_event p JOIN sre_ci_metadata m ON m.ci_name = p.rootCauseEntity WHERE apmtype = ''DT'' AND eventtype = ''Issue'' AND p.project_id = {project_id} AND startTime BETWEEN CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', DATEADD(DAY, -1, GETDATE())) AS BIGINT) * 1000 AND CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', GETDATE()) AS BIGINT) * 1000 AND p.status = ''OPEN'' AND m.ci_type = ''Application'';\n","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"project_id\":\"p.project_id\",\"hostgroup\":\"host_groupName\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'AppswithIssues_DT' and organization = 'leo1311';
		</sql> 
	</changeSet>





	<changeSet author="Leap" id="3v1-cip-20250108-600">
		<sql dbms="mssql" splitStatements="true" stripComments="true">
		UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT m.ci_Id AS Entity_ID, m.display_name AS App_Name, eventId, displayId AS Alert_ID, title AS Description, p.status AS Status, severityLevel AS Severity_Level,FORMAT(DATEADD(SECOND, CAST(startTime AS BIGINT) / 1000, ''19700101 00:00:00:000''), ''MM/dd/yy HH:mm:ss'') AS Raised_Time FROM sre_event p JOIN sre_ci_metadata m ON m.ci_name = p.rootCauseEntity WHERE apmtype = ''DT'' AND eventtype = ''Alert'' AND p.project_id = {project_id} AND startTime BETWEEN CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', DATEADD(DAY, -1, GETDATE())) AS BIGINT) * 1000 AND CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', GETDATE()) AS BIGINT) * 1000 AND p.status = ''OPEN'' AND m.ci_type = ''Application'' GROUP BY m.ci_Id, m.display_name, eventId, displayId, title, p.status, severityLevel, startTime;","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"project_id\":\"p.project_id\",\"hostgroup\":\"host_groupName\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'AppswithAlerts_DT' and organization = 'leo1311';
		</sql> 
	</changeSet>




	<changeSet author="Leap" id="3v1-cip-20250108-700">
		<sql dbms="mssql" splitStatements="true" stripComments="true">
		UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT s.ci_Id  AS Service_ID,s.display_Name AS Service_Name,ci_STATUS AS Status,service_Type AS Service_Type, CASE Technology_Type WHEN ''(NULL)'' THEN ''N\\A'' ELSE Technology_Type END AS Technology_Type FROM sre_ci_metadata s  WHERE s.ci_type=''Service'' and s.project_id = {project_id} AND apm_type = ''DT'';","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"project_id\":\"project_id\",\"hostgroup\":\"host_groupName\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'Totalservices_DT' and organization = 'leo1311';
		</sql> 
	</changeSet>



	<changeSet author="Leap" id="3v1-cip-20250108-800">
		<sql dbms="mssql" splitStatements="true" stripComments="true">
		UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT e.eventId AS Event_ID, c.ci_Id AS Entity_ID, c.display_Name AS Service_Name, title AS Description, e.status AS Status, severityLevel AS Severity_Level, FORMAT(DATEADD(SECOND, CAST(startTime AS BIGINT) / 1000, ''19700101 00:00:00:000''), ''MM/dd/yy HH:mm:ss'') AS Raised_Time FROM sre_event e JOIN sre_ci_metadata c ON e.rootCauseEntity = c.ci_name WHERE apmtype = ''DT'' AND e.project_id = {project_id} AND startTime BETWEEN CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', DATEADD(DAY, -1, GETDATE())) AS BIGINT) * 1000 AND CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', GETDATE()) AS BIGINT) * 1000 AND c.ci_id IS NOT NULL AND e.eventType = ''Issue'' AND e.status = ''OPEN'' AND c.ci_type = ''Service'' GROUP BY c.ci_name, e.eventId, c.ci_Id, c.display_Name, title, e.status, severityLevel, startTime;","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"project_id\":\"e.project_id\",\"hostgroup\":\"host_groupName\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'ServiceswithIssues_DT' and organization = 'leo1311';
		</sql> 
	</changeSet>




	<changeSet author="Leap" id="3v1-cip-20250108-900">
		<sql dbms="mssql" splitStatements="true" stripComments="true">
		UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT e.eventId AS Event_ID,c.ci_Id AS Entity_ID, c.display_Name AS Service_Name, title AS Description, e.status AS Status,severityLevel AS Severity_Level, FORMAT(DATEADD(SECOND, CAST(startTime AS BIGINT) / 1000, ''19700101 00:00:00:000''), ''MM/dd/yy HH:mm:ss'') AS Raised_Time\nFROM sre_event e JOIN sre_ci_metadata c ON e.rootCauseEntity = c.ci_name WHERE apmtype = ''DT'' AND e.project_id = {project_id} AND startTime BETWEEN CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', DATEADD(DAY, -1, GETDATE())) AS BIGINT) * 1000 AND CAST(DATEDIFF(SECOND, ''19700101 00:00:00'', GETDATE()) AS BIGINT) * 1000 AND c.ci_id IS NOT NULL AND e.eventType = ''Alert'' AND e.status = ''OPEN'' AND c.ci_type = ''Service'' GROUP BY c.ci_name, e.eventId, c.ci_Id, c.display_Name, title, e.status, severityLevel, startTime;","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"project_id\":\"e.project_id\",\"hostgroup\":\"host_groupName\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'ServiceswithAlerts_DT' and organization = 'leo1311';
		</sql> 
	</changeSet>

	<changeSet author="Leap" id="3v1-cip-20250108-900-1-16-01">
		<sql dbms="mssql" splitStatements="true" stripComments="true">
		UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT coalesce(SUM(counts),0) AS "Total_count"
FROM (
    SELECT COUNT(*) AS "counts"
    FROM sre_location
    INNER JOIN sre_probe_run_app ON sre_probe_run_app.location_id = sre_location.location_id
    INNER JOIN ccl_app ON sre_probe_run_app.application_id = ccl_app.application_id
    INNER JOIN ccl_app_grp ON ccl_app_grp.application_grp_id = ccl_app.application_grp_id
    WHERE location_name IN (location_name) 
      AND application_name IN (application_name)
      AND run_date BETWEEN (''2019-09-01'') AND (''2019-12-30'')
      AND run_result IN (''0'',''1'') 
      AND application_grp_name IN (application_grp_name)
    GROUP BY probe_run_app_id, run_description, SUT, run_start_time, run_end_time, run_result
) AS grouped_counts","Cacheable":"false","isStreaming":"false","defaultValues":"","writeMode":"append","params":"","tableName":"","uniqueIdentifier":""}' WHERE name = 'ApplicationDetails';
		</sql> 
	</changeSet>


	<changeSet author="Leap" id="24-cip-242025-2-061">

    <sql dbms="mysql" splitStatements="true" stripComments="true"> 

UPDATE mldataset SET attributes = '{"filter": "", "mode": "query", "Query": "SELECT DISTINCT (countApp.Host), countApp.status AS STATUS FROM ((SELECT DISTINCT(c.ci_name) AS `HOST`, c.ci_name, d.color AS STATUS FROM sre_ci_metadata c INNER JOIN (SELECT c.ci_id, c.ci_name AS `status`, c.ci_name, CASE WHEN (SELECT COUNT(*) FROM sre_event WHERE rootCauseEntity = c.ci_name AND startTime BETWEEN UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 2 YEAR))*1000 AND UNIX_TIMESTAMP(NOW())*1000 AND project_id = {project_id} AND apmType = \'Appd\' AND STATUS = \'OPEN\' AND severityLevel = \'CRITICAL\') > 0 THEN \'red\' ELSE \'green\' END AS COLOR FROM sre_ci_metadata c WHERE c.project_id = {project_id} AND c.ci_type IN (\'Service\') GROUP BY c.ci_name, ci_id ORDER BY COLOR DESC) AS d ON c.service_type = d.status AND c.project_id = {project_id} AND c.apm_type = \'Appd\' AND c.service_type LIKE \'auth-services\' ORDER BY STATUS DESC) UNION ALL (SELECT c.ci_name AS `HOST`, c.ci_name, CASE WHEN (SELECT COUNT(*) FROM sre_event WHERE rootCauseEntity = c.ci_name AND startTime BETWEEN UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 2 YEAR))*1000 AND UNIX_TIMESTAMP(NOW())*1000 AND project_id = {project_id} AND apmType = \'Appd\' AND STATUS = \'OPEN\' AND severityLevel = \'CRITICAL\') > 0 THEN \'red\' ELSE \'green\' END AS STATUS FROM sre_ci_metadata c WHERE c.project_id = {project_id} AND c.apm_type = \'AppD\' AND c.ci_type IN (\'HOST\') AND c.ci_name NOT LIKE (\'auth-services%\') GROUP BY c.ci_name ORDER BY STATUS DESC)) AS countApp ORDER BY countApp.status DESC", "Cacheable": false, "isStreaming": "false", "defaultValues": "", "writeMode": "append", "params": "{\\"project_id\\":\\"(SELECT id FROM usm_project WHERE name = \'@projectname\')\\"}", "tableName": "", "uniqueIdentifier": ""}' WHERE NAME = 'NodeStatus';

</sql> 
  
</changeSet>

<changeSet author="Leap" id="24-cip-14-2-2025-2-061-01-1">

    <sql dbms="mssql" splitStatements="true" stripComments="true"> 

UPDATE mldataset SET attributes = '{"filter":"","mode":"query","Query":"SELECT COUNT(*) as ''COUNT'' FROM ccl_app,ccl_app_grp WHERE ccl_app.application_grp_id=ccl_app_grp.application_grp_id AND ccl_app.project_id=(SELECT id FROM usm_project WHERE NAME=''@projectname'')","Cacheable":"false","isStreaming":"false","defaultValues":"","writeMode":"append","params":"","tableName":"","uniqueIdentifier":""}' WHERE name = 'Application_Count' ;

</sql> 
  
</changeSet>


<changeSet author="Leap" id="24-cip-14-2-2025-2-061-01-2">

    <sql dbms="mssql" splitStatements="true" stripComments="true"> 

UPDATE mldataset SET attributes = '{"filter":"","mode":"query","Query":"SELECT COUNT(sp.application_id) AS ''COUNT'' FROM sre_probe_run_app sp INNER JOIN ccl_app ca ON sp.application_id=ca.application_id WHERE run_result=0 AND ca.project_id=(SELECT id FROM usm_project WHERE NAME=''@projectname'')","Cacheable":"false","isStreaming":"false","defaultValues":"","writeMode":"append","params":"","tableName":"","uniqueIdentifier":""}' WHERE name = 'Failed_Applications' ;

</sql> 
  
</changeSet>


<changeSet author="Leap" id="24-cip-14-2-2025-2-061-01-3">

    <sql dbms="mssql" splitStatements="true" stripComments="true"> 

UPDATE mldataset SET attributes = '{"filter":"","mode":"query","Query":"SELECT COUNT(sp.application_id) AS ''COUNT'' FROM sre_probe_run_app sp INNER JOIN ccl_app ca ON sp.application_id=ca.application_id WHERE run_result=1 AND ca.project_id=(SELECT id FROM usm_project WHERE NAME=''@projectname'') ","Cacheable":"false","isStreaming":"false","defaultValues":"","writeMode":"append","params":"{}","tableName":"","uniqueIdentifier":""}' WHERE name = 'Run_successful' ;


</sql> 
  
</changeSet>

<changeSet author="Leap" id="24-cip-14-2-2025-2-061-01-4">

    <sql dbms="mssql" splitStatements="true" stripComments="true"> 

UPDATE mldataset SET attributes = '{"filter":"","mode":"query","Query":"SELECT COUNT(sp.application_id) AS ''COUNT'' FROM sre_probe_run_app sp INNER JOIN ccl_app ca ON sp.application_id=ca.application_id WHERE run_result=0 AND ca.project_id=(SELECT id FROM usm_project WHERE NAME=''@projectname'')","Cacheable":"false","isStreaming":"false","defaultValues":"","writeMode":"append","params":"{}","tableName":"","uniqueIdentifier":""}' WHERE name = 'Run_unsuccessful' ;

</sql> 
  
</changeSet>


	<changeSet author="Leap" id="24-cip-14-2-2025-2-091-02-20-01">

    <sql dbms="mssql" splitStatements="true" stripComments="true"> 

UPDATE mldataset SET attributes = '{"filter":"","mode":"query","Query":"SELECT DISTINCT(application_name) AS ''ApplicationName'' , convert(varchar,MAX(sre_probe_run_app.run_start_time),8) AS ''StartTime'' , convert(varchar,sre_probe_run_app.run_end_time,8) AS ''EndTime'' FROM ccl_app INNER JOIN  sre_probe_run_app ON sre_probe_run_app.application_id =ccl_app.application_id AND project_id=project_id AND run_result=0 AND project_id=(SELECT id FROM usm_project WHERE NAME=''@project_name'') GROUP BY ccl_app.application_name,sre_probe_run_app.run_start_time,sre_probe_run_app.run_end_time","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"","tableName":"","uniqueIdentifier":""}' WHERE name = 'Failed_Applications_Name';

</sql> 
  
</changeSet>


<changeSet author="Leap" id="24-cip-14-2-2025-2-091-02-30-02">

    <sql dbms="mssql" splitStatements="true" stripComments="true">
UPDATE mldataset SET attributes = '{"filter":"","mode":"query","Query":"SELECT application_grp_name AS ''Application_Group_Name'', probe_name AS ''Probe Name'', convert(varchar,run_start_time,8) AS ''Run Start Time'', convert(varchar,run_end_time,8) AS ''Run End Time'', run_time AS ''Run Time'' FROM sre_probe_run_app INNER JOIN ccl_app ON sre_probe_run_app.application_id=ccl_app.application_id INNER JOIN ccl_app_grp ON ccl_app.application_grp_id=ccl_app_grp.application_grp_id INNER JOIN sre_location ON sre_probe_run_app.location_id = sre_location.location_id INNER JOIN sre_probe ON sre_probe_run_app.probe_id = sre_probe.probe_id WHERE run_result=1 AND ccl_app.project_id=ccl_app.project_id AND ccl_app.project_id=(SELECT id FROM usm_project WHERE NAME=''@project_name'')  GROUP BY application_grp_name, probe_name, run_start_time, run_end_time, run_time","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"","tableName":"","uniqueIdentifier":""}' WHERE name = 'Testapplicationgroupwithactiveprobe' ;

</sql> 
  
</changeSet>



<changeSet author="Leap" id="24-cip-14-2-2025-2-091-02-40-03">

    <sql dbms="mssql" splitStatements="true" stripComments="true">

UPDATE mldataset SET attributes = '{"filter":"","mode":"query","Query":"SELECT application_name AS ''APPLICATION_NAME'' ,run_description AS ''PROBE NAME'' , run_date AS ''RUN DATE'' ,   LEFT(run_start_time,8) AS ''START TIME'' ,LEFT(run_end_time,8) AS ''END TIME'' FROM  sre_probe_run_app INNER JOIN ccl_app ON sre_probe_run_app.application_id= ccl_app.application_id WHERE project_id=project_id AND application_name IN (application_name) AND run_result=1 AND project_id=(SELECT id FROM usm_project WHERE NAME=''@project_name'');","Cacheable":"false","isStreaming":"false","defaultValues":"","writeMode":"append","params":"","tableName":"","uniqueIdentifier":""}' WHERE name = 'testsuccessproberuns' ;


</sql> 
  
</changeSet>



	<changeSet author="Leap" id="24-cip-14-2-2025-2-091-02-50-04">

    <sql dbms="mssql" splitStatements="true" stripComments="true">

UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT ccl_app.application_name AS ''APPLICATION_NAME'' ,sre_probe_run_app.run_description AS ''PROBE NAME'' , sre_probe_run_app.run_date AS ''RUN DATE'' , convert(varchar,sre_probe_run_app.run_start_time,8) AS ''START TIME'' , convert(varchar,sre_probe_run_app.run_end_time,8) AS ''END TIME'' FROM  sre_probe_run_app INNER JOIN ccl_app ON ccl_app.application_id=sre_probe_run_app.application_id WHERE ccl_app.project_id=ccl_app.project_id AND  ccl_app.application_name IN (ccl_app.application_name)  AND sre_probe_run_app.run_result=0 AND ccl_app.application_name = {application_name};","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"application_name\":\"application_name\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'testfailedproberuns' ;

</sql> 
  
</changeSet>




<changeSet author="Leap" id="24-cip-14-2-2025-2-091-02-60-05">

    <sql dbms="mssql" splitStatements="true" stripComments="true">

UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT application_name AS ''APPLICATION_NAME'' ,run_description AS ''PROBE NAME'' , run_date AS ''RUN DATE'' ,   LEFT(run_start_time,8) AS ''START TIME'' ,LEFT(run_end_time,8) AS ''END TIME'' FROM  sre_probe_run_app INNER JOIN ccl_app ON sre_probe_run_app.application_id= ccl_app.application_id WHERE project_id=project_id AND application_name IN (application_name) AND run_result=1 AND ccl_app.application_name = {application_name};","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"application_name\":\"application_name\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'testsuccessproberuns' ;

</sql> 
  
</changeSet>



<changeSet author="Leap" id="24-cip-14-2-2025-2-091-02-70-06">

    <sql dbms="mssql" splitStatements="true" stripComments="true">

UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT sre_app_availability.application_name  AS  ''APPLICATION_NAME'',  sre_app_availability.application_grp_name AS ''APPLICATION GROUP NAME'',  sre_app_availability.probe_name AS ''PROBE NAME'' , sre_app_availability.location_name AS ''LOCATION NAME'',   sre_app_availability.perc_availability AS ''PERCENTAGE AVAILABILITY'' FROM sre_app_availability   INNER JOIN ccl_app ON  ccl_app.application_id=sre_app_availability.application_id  WHERE ccl_app.project_id=ccl_app.project_id AND   sre_app_availability.application_name = {application_name};","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"application_name\":\"application_name\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'AllApplicationsPerc' ;


</sql> 
  
</changeSet>



	<changeSet author="Leap" id="24-cip-14-2-2025-2-091-02-80-07">

    <sql dbms="mssql" splitStatements="true" stripComments="true">

UPDATE mldataset set attributes = '{"filter":"","mode":"query","Query":"SELECT DISTINCT eventId as ''PID'' ,displayId AS ''Issue Id'',title AS ''Description'',rootCauseEntity AS ''Origin Entity'' ,\nimpactLevel AS ''ImpactLevel'',  STATUS AS ''Status'',  \nDateadd(SECOND,(CAST (substring(p.startTime,1,10) AS bigint)),''1970-01-01'') AS ''Raised Time'',  \nDateadd(SECOND,(CAST (substring(p.endTime,1,10) AS bigint)),''1970-01-01'') AS ''Resolution Time'',\nincidentId AS ''Incident Id'' FROM sre_event p INNER JOIN sre_ci_metadata c \nON c.ci_name = p.rootcauseentity WHERE  p.project_id = {project_id}\nAND Dateadd(SECOND,(CAST (substring(p.startTime,1,10) AS bigint)),''1970-01-01'')  BETWEEN (DATEADD(DAY, -1800, getdate()))  AND getdate() \nAND eventtype=''Issue''  AND apmtype = ''DT'' AND impactLevel= {Impact Level} \nand rootCauseEntity={rootCauseEntity} AND severityLevel= {severityLevel}\nAND STATUS={status} AND eventId={eventId}","Cacheable":false,"isStreaming":"false","defaultValues":"","writeMode":"append","params":"{\"project_id\":\"p.project_id\",\"Impact Level\":\"impactLevel\",\"rootCauseEntity\":\"rootCauseEntity\",\"severityLevel\":\"severityLevel\",\"eventId\":\"eventId\",\"status\":\"status\"}","tableName":"","uniqueIdentifier":""}' WHERE name = 'IssueDetails_DT' ;


</sql> 
  
</changeSet>
<!--
<changeSet author="sumanth.kota" id="CAS-2025-02-27-1">
    <sql dbms="mysql"> 
		INSERT INTO mldataset (id,attributes, dataset_type, DESCRIPTION, exp_status, NAME, ORGANIZATION, schemajson, TYPE, backing_dataset, dataset_schema, datasource, lastmodifiedby, lastmodifieddate, alias, CONTEXT, is_approval_required, is_permission_managed, is_inbox_required, is_audit_required, is_archival_enabled, archival_config, dashboard, metadata, modeltype, views, taskdetails, tags, interfacetype, adaptername, isadapteractive, indexname, summary, event_details)
		VALUES(1080,'{"filter":"","mode":"query","Query":"SELECT * FROM cas_execution_status LIMIT 50;","Cacheable":false,"isStreaming":"false","Headers":"","defaultValues":"","QueryParams":"","writeMode":"append","params":"{}","tableName":"cas_execution_status","uniqueIdentifier":""}',NULL,NULL,NULL,'CAS_Execution_Status','leo1311',NULL,'rw',NULL,NULL,'AcmeBTF', 'admin','2025-02-27 14:25:00.230811','CAS Execution',NULL,0,0,0,0,NULL,NULL,NULL,NULL,NULL,'Table View',NULL,'[]',NULL,NULL,NULL,NULL,NULL,NULL);
	</sql> 
</changeSet>
-->
<!--
<changeSet author="sumanth.kota" id="CAS-2025-02-27-2">
    <sql dbms="mssql" splitStatements="true" stripComments="true"> 
    	SET IDENTITY_INSERT mldataset ON;
		INSERT INTO mldataset (id,attributes, dataset_type, DESCRIPTION, exp_status, NAME, ORGANIZATION, schemajson, TYPE, backing_dataset, dataset_schema, datasource, lastmodifiedby, lastmodifieddate, alias, CONTEXT, is_approval_required, is_permission_managed, is_inbox_required, is_audit_required, is_archival_enabled, archival_config, dashboard, metadata, modeltype, views, taskdetails, tags, interfacetype, adaptername, isadapteractive, indexname, summary, event_details)
		VALUES(1080,'{"filter":"","mode":"query","Query":"SELECT TOP 50 * FROM cas_execution_status;","Cacheable":false,"isStreaming":"false","Headers":"","defaultValues":"","QueryParams":"","writeMode":"append","params":"{}","tableName":"cas_execution_status","uniqueIdentifier":""}',NULL,NULL,NULL,'CAS_Execution_Status','leo1311',NULL,'rw',NULL,NULL,'AcmeBTF', 'admin',CONVERT(DATETIME2, '2025-02-27 14:25:00.230811', 121),'CAS Execution',NULL,0,0,0,0,NULL,NULL,NULL,NULL,NULL,'Table View',NULL,'[]',NULL,NULL,NULL,NULL,NULL,NULL);
		SET IDENTITY_INSERT mldataset OFF;
	</sql> 
</changeSet>
-->


	<changeSet author="Leap" id="24-cip-14-2-2025-2-091-02-90-08">

    <sql dbms="mssql" splitStatements="true" stripComments="true">

UPDATE dbs_widget_configuration SET widget_json='[{"tableConfig":{"hideColumns":[],"clickColumns":[{"clickableParameter":"Host","attribute":"Host","selectedNavigation":2,"url":null,"dashboard":{"projectId":2,"id":41938,"appname":"Host Metrics","createdon":null,"category":"board-category","description":null,"createdby":"admin","context":null,"icon":null,"layout":null,"dashjson":null,"landingdash":null,"image":null,"showdate":null,"dasharray":null,"dependentfilter":null,"dashfloatingmodal":null,"bgimage":null,"dashboardAccess":"Public","applytheme":null}}],"showScrollBar":false,"colorColumns":["STATUS"],"alignColumnLeft":[],"alignColumnRight":[],"alignColumnHeaders":"center"}},{"personaSetup":{"backgroundcolor":null,"colorChanged":false,"bordercolor":null,"bordercolorChanged":false,"headerColor":null,"headerColorChanged":false,"parameterColor":null,"parameterColorChanged":false,"parameterColumnNameColor":null,"parameterColumnNameColorChanged":false,"bottomStickedParameterColor":null,"bottomStickedParameterColorChanged":false,"headerTextColor":null,"headerTextColorChanged":false,"parameterTextColor":null,"parameterTextColorrChanged":false,"fontfamily":"UniversLTStd,Arial","fontsize":13,"countfontsize":null,"titlefontfamily":null,"titlesize":12,"parameterFontSize":null,"tabHeaderFontSize":null,"tabDataFontSize":null,"leafletTooltipFontSize":null,"borderRadius":0,"borderWidth":1,"imageSize":45,"textcolor":null,"txtColorChanged":false,"tableHeaderTextColor":null}},{"layoutSetup":{"showFullTitleLength":true,"showFullinfoLength":false,"alignInformation":"center","alignTitle":"none","showFooter":false,"footer":null,"footerAlign":"center","enableHtmlFormat":false}},{"drilldownSetup":{"paramvalues":[{"param":null,"operator":null,"value":null}]}},{"urlSetup":{"urlParams":false,"drillUrlParams":null}},{"sameWidgetDrilldown":false}] '
            WHERE widget_name ='Host Availbility' AND project_id=(SELECT id FROM usm_project WHERE NAME='leo1311');

</sql> 
  
</changeSet>
</databaseChangeLog>
